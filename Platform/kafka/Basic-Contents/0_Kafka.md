# Kafka

## 빅데이터 파이프라인에 적합한 이유
**높은 처리량**  
토픽과 컨슈머의 갯수를 늘려서 병렬 처리를 함으로써 높은 데이터 처리량을 유지할 수 있다.  
**확장성**  
데이터 파이프라인에서 데이터를 모을 때 데이터가 얼마나 들어올지 예측이 어렵다.  
가변적인 환경에서 브로커 개수를 늘려서 스케일 아웃을 할 수 있다.  
> 데이터 개수가 적어지면 브로커 개수를 줄여서 스케일 인을 할 수 있다.  
**영속성**  
프로그램이 종료되더라도 사라지지 않은 데이터의 특성  
카프카는 파일 시스템을 이용해 저장한다.  
페이지 캐시 메모리 영역을 사용하여 한번 읽은 파일 내용은 메모리에 저장해 다시 사용함으로써 처리량을 유지할 수 있었다.  
**고가용성(HA)**  
일부 서버에 장애가 발생하더라도 무중단으로 안전하고 지속적 데이터 처리가 가능하다.  
한개의 브로커의 내용을 다른 브로커에도 복사해서 장애가 발생하더라도 지속적 처리가 가능하다.  

## 클라이언트 메타데이터
카프카 클라이언트는 통신하고자하는 리더 파티션의 위치를 알기 위해 데이터를 주고 받기 전 브로커로부터 전달 받는다.  
`metadata.max.age.ms`: 메타데이터를 강제로 리프레시하는 간격  
`metadata.max.idle.ms`: 프로듀서가 유휴상태일 경우 메타데이터를 캐시에 유지하는 기간  